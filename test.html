<script src="jquery.js" type="text/javascript"></script>

<style>
    #facade:hover{
        color: #fff;
    }
    #facade {
        transition: all 0.5s ease;
        position: absolute;
        padding: 50px; 
        top: 0px; left: 0px;width: 120px;
        background-color: transparent; 
        opacity: 0.6; 
        
    }
</style>

<div style="">
    <div style="">
        Shimmer in Canvas
    </div>

    <div style="margin: 40px; padding: 40px; border: 1px solid #ccc; width: 240px;">
        <canvas id="shimmer" height="150" width="250"></canvas>
    </div>
</div>



<script>

    // requestAnim shim layer by Paul Irish
    window.requestAnimFrame = (function(){
      return  window.requestAnimationFrame       || 
              window.webkitRequestAnimationFrame || 
              window.mozRequestAnimationFrame    || 
              window.oRequestAnimationFrame      || 
              window.msRequestAnimationFrame     || 
              function(/* function */ callback, /* DOMElement */ element){
                window.setTimeout(callback, 1000 / 60);
              };
    })();
    var shimmer = (function shimmer(){
        var canvas = document.getElementById("shimmer");
        var ctx = canvas.getContext('2d');
        ctx.font = "20pt Arial";
        var lightSource = 0, 
            lightLeft, 
            lightCenter, 
            lightRight, 
            spread = 0.28, 
            correctedInc;
        return {
            currTime: Date.now(),
            diffTime: 0,
            spread: 0,
            paused: false,
            pausedTime: 0,
            pauseInterval: 850,
            lightSource: 0,
            inc: 0.015,
            keepTime: function(){
                this.diffTime = Date.now() - this.currTime;
                this.currTime = Date.now();
            },
            letThereBeLight: function(){
                var gradient = ctx.createLinearGradient(0,0,240,0);
                var smartInc = this.inc * (this.diffTime/(1000/60));
                
                this.lightSource += smartInc;
                lightCenter = (this.lightSource > 1) ? 1 : this.lightSource;
                if (lightCenter < 0) lightCenter = 0;
                lightLeft = ((this.lightSource - spread) < 0) ? 0 : this.lightSource - spread;
                if (lightLeft > 1) lightLeft = 1;
                lightRight = (this.lightSource + spread) > 1 ? 1 : this.lightSource + spread; 
                if (lightRight < 0) lightRight = 0;

                gradient.addColorStop(lightLeft,"gray");
                gradient.addColorStop(lightCenter,"white");
                gradient.addColorStop(lightRight,"gray");

                return gradient;
            },
            on: function(){

                this.keepTime();

                if(this.lightSource > 1.3){ 
                    this.lightSource = -0.3; 
                    this.paused = true;
                    this.pausedTime = Date.now();
                }
                if(this.paused){
                    if((Date.now()-this.pausedTime) > this.pauseInterval){
                        this.paused = false;
                    }
                } else {

                    ctx.clearRect(0,0,240,120);
                    ctx.fillStyle = this.letThereBeLight();  
                    ctx.fillText("Shimmer", 10, 20);
                    ctx.fillText(this.currTime, 10, 45);
                    ctx.fillText(this.diffTime, 180, 75);
                }
            }
        }
    }())

    function animate() {
        requestAnimFrame( animate );
        shimmer.on();
    };

    animate();




/*
    if(canvas.getContext){
        var context = canvas.getContext('2d');
        context.font = "20pt Arial";
        context.fillText("Shimmer", 10, 20);
        setTimeout(function(){
            context.clearRect(0,0,100,120);
            var gradient=context.createLinearGradient(0,0,50,0);
            gradient.addColorStop("0","magenta");
            gradient.addColorStop("0.5","blue");
            gradient.addColorStop("1.0","red");
            // Fill with gradient
            context.fillStyle=gradient;  
            context.fillText("testasdfsafdasf", 5, 30);
        }, 1000);
    } else {
        console.log("Go get yourself a real browser");
    }
*/
</script>
